
(function(){var _JexMessage=JexMsg.extend({init:function(){this._super();this.obj=$("#"+jex.getMsgId());this.tblSize=5;this.view_data_min=1;this.view_data_max=19;this.bufferSize=50;this.head=[{'ID':'MSG','NAME':'메시지','width':'100%','style':'text-align:center;'}];this.dat=[];this.table;this.thead;this.tbody;this.width="99%";this.height=1000;this.msgTime=5000;this.root_css={"width":"80%","min-width":"360px","max-width":"800px","min-height":"50px","z-index":"32000","border":"1px solid #555555","background-color":"#FFFFFF"};this.header_css={"border":"1px solid #FFFFFF","height":"8px","background-image":" url(/img/00/greentype/bg_titbg.gif)"};this.body_css={"width":"85%","float":"left","padding":"10px 10px 10px 15px"};this.close_css={"width":"20px","float":"right","padding":"8px 0px 7px 0px"};try{this.left=0;this.top=$(window).height()-this.height+2;}catch(e){this.left=1000;this.top=700;}
if(this.obj.length==0){this.obj=$("<div></div>");this.table=$("<table></table>");this.thead=$("<thead><tr></tr></thead>");this.tbody=$("<tbody></tbody>");this.obj.attr("id",jex.getMsgId());this.setDivStyle();this.obj.show();this.table.appendTo(this.obj);this.tbody.appendTo(this.table);var r=this;$(window).scroll(function(){r.setPosition();});$(window).resize(function(){r.setPosition();});}},addRemover:function(){var r=this;setTimeout(function(){if(r.tbody.find("tr").length==0)return;r.tbody.find(">tr:last").remove();r.dat.shift();r.setPosition();},this.msgTime);},setPosition:function(){this.height=this.table.height();this.obj.css("height",this.height+"px");this.top=$(window).height()-(this.height+2)+$(window).scrollTop();this.obj.stop().animate({"top":this.top+"px"},1000);},setDivStyle:function(){this.divStyle={"z-index":"32000","position":"absolute","overflow":"hidden","top":this.top+"px","left":this.left+"px","width":this.width,"height":this.height};for(var v in this.divStyle){this.obj.css(v,this.divStyle[v]);}},addMsg:function(m){var r=this;if($("#"+this.obj.attr("id")).length==0){this.obj.appendTo("body");this.setDivStyle();this.table.css("width","100%");}
this.dat.push(m);if(this.dat.length>this.bufferSize)this.dat.shift();var tr=$("<tr align='center'></tr>");tr.prependTo(this.tbody);for(var i=0;i<this.head.length;i++){var v=this.head[i];var td=$("<td align='center'><div></div></td>");var height;td.appendTo(tr);td.attr("id",v['ID']);td.attr("style",v['style']);var rdiv=td.find("div");var hdiv=$("<div></div>");var bdiv=$("<div>"+m[v['ID']]+"</div>");var cdiv=$("<div><img src='/demo/img/comm/bullet/x1.jpg' /></div>");hdiv.appendTo(rdiv);bdiv.appendTo(rdiv);cdiv.appendTo(rdiv);for(v in this.root_css){rdiv.css(v,this.root_css[v]);}
for(v in this.header_css){hdiv.css(v,this.header_css[v]);}
for(v in this.body_css){bdiv.css(v,this.body_css[v]);}
for(v in this.close_css){cdiv.css(v,this.close_css[v]);}
if(v['ID']=="MSG"){td.css("cursor","pointer");td.dblclick(function(e){var x=e.pageX-this.offsetLeft;var y=e.pageY-this.offsetTop;r.makeToolTip($(this).find("div").html(),x,y);});}
height=rdiv.height();td.height(height+"px");}
tr.height(height+"px");if(this.tbody.find(">tr").length>this.tblSize)this.tbody.find(">tr:last").remove();this.addRemover();this.setPosition();},reDrawTbl:function(){var r=this;this.tbody.find("tr").remove();var idx=this.dat.length-this.tblSize;idx=(idx>0)?idx:0;for(var j=idx;j<this.dat.length;j++){var m=this.dat[j];var tr=$("<tr></tr>");tr.prependTo(this.tbody);for(var i=0;i<this.head.length;i++){var v=this.head[i];var td=$("<td><div></div></td>");td.appendTo(tr);td.attr("id",v['ID']);td.attr("style",v['style']);td.find("div").html(m[v['ID']]);if(v['ID']=="MSG"){td.css("cursor","pointer");td.dblclick(function(e){var x=e.pageX-this.offsetLeft;var y=e.pageY-this.offsetTop;r.makeToolTip($(this).find("div").html(),x,y);});}}}},makeToolTip:function(msg,l,t){if(jex.isNull(this.tooltipDiv)||this.tooltipDiv.length==0){this.tooltipDiv=$("<div id='_jexDebuggerTooltip'>"+msg+"</div>");this.tooltipDiv.appendTo("body");this.tooltipDivHeight=200;this.tooltipDiv.attr("style","z-index:32768;background-color:#ffffff;position:absolute;min-height:"+this.tooltipDivHeight+"px;width:98%;top:"+(t-this.tooltipDivHeight)+"px;left;"+(l+this.tooltipDiv.width())+"px;border:1px solid #000000;");var r=this;this.tooltipDiv.dblclick(function(){r.tooltipDiv.hide();});}else{this.tooltipDiv.html(msg);this.tooltipDiv.show();}},setHeader:function(h){this.head=h;},printInfo:function(code,msg){var m={};m['TYPE']="INFO";m['CODE']=code;m['MSG']=this.makeMsg(arguments);this.addMsg(m);},printError:function(code,msg){var m={};m['TYPE']="ERROR";m['CODE']=code;m['MSG']=this.makeMsg(arguments);this.addMsg(m);},makeMsg:function(arg){var msg=jex.getMsg(arg[0]);var mat=msg.split("%");for(var i=1;i<mat.length;i+=2){jex.printDebug("i ::"+i);jex.printDebug("mat[i] "+mat[i]);jex.printDebug("arg[i] "+arg[(i-1)/2+1]);var regExp=new RegExp("%"+mat[i]+"%",'g');msg=msg.replace(regExp,arg[(i-1)/2+1]);}
var msgAppend=(arg.length)-mat.length;msg="<b>"+msg+"</b><br />";if(msgAppend>0)msg+="<br />";for(var i=0;i<msgAppend;i++)msg+=jex.null2Void(arg[mat.length+i]);jex.printDebug("printMessage :: "+msg+"::"+msgAppend);return msg;}});jex.setMsgObj(new _JexMessage());})();$(function(){jex.setMsgObj(jex.getRootDom().jex.getMsgObj());});